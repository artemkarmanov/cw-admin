<div class="d-flex justify-content-between align-items-center">
    <h2>Booking details</h2>
    <button class="btn text-primary" routerLink="edit">
        <cwb-icon name="pencil"></cwb-icon>
        Edit
    </button>
</div>
<div *ngIf="data$|async as data">
    <fieldset>
        <div>
            <label class="form-label">Title</label>
            <div class="text-field">{{data.title}}</div>
        </div>
        <div>
            <label class="form-label">Booking ID</label>
            <div class="field-text">{{data.bookingToken}}</div>
        </div>
        <div class="d-flex">
            <div style="flex:1">
                <label class="form-label">Timezone</label>
                <div class="field-text">
                    {{data.bookingTimeZone | region}}, 
                    {{data.bookingTimeZone | city}} 
                    {{data.bookingTimeZone | timezone}}
                </div>
            </div>
        </div>

    </fieldset>
    <fieldset class="mt-3">
        <div>
            <label class="form-label">Audio details</label>
            <div class="field-text">{{data.audioDetails}}</div>
        </div>
        <div>
            <label class="form-label">Caption details</label>
            <div class="field-text">{{data.captionDispDetails}}</div>
        </div>
        <div *ngIf="data.bookingPasscode && data.requirePasscode">
            <label class="form-label">Booking passcode</label>
            <div class="field-text">{{data.bookingPasscode}}</div>
        </div>
        <div>
            <label class="form-label">Captioner passcode</label>
            <div class="field-text">{{data.bookingCaptionerPasscode}}</div>
        </div>
        <ng-container *ngIf="data.viewerEmails">
            <ng-container *ngIf="data.viewerEmails.split('\n').length > 0">
                <label class="form-label">Number of authorized viewers: {{data.viewerEmails.split('\n').length}}</label>
                <div *ngFor="let viewer of data.viewerEmails.split('\n')">
                    <div class="field-text">{{viewer}}</div>
                </div>
            </ng-container>
        </ng-container>
        <ng-container *ngIf="data.requirePasscode">
            <div class="parameter pt-2">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="9" fill="#ECFCD3"/>
                    <path d="M8.5 12.3333L10.8333 14.6667L15.5 10" stroke="#48AA1C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>
                    Authorised viewers only
                </span>
            </div>
        </ng-container>
        <ng-container *ngIf="data.requireLogin">
            <div class="parameter pt-2">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="9" fill="#ECFCD3"/>
                    <path d="M8.5 12.3333L10.8333 14.6667L15.5 10" stroke="#48AA1C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>
                    Require Captionworks login
                </span>
            </div>
        </ng-container>
    </fieldset>

    <div class="pt-1">
        <span class="share-label">Share viewing details</span>
        <cwb-share-booking-link [booking]="data"></cwb-share-booking-link>
    </div>
</div>
